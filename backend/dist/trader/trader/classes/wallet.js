'use strict';const _0x2d9567=_0x3478;(function(_0x1241e9,_0xec8ae7){const _0x35ecf0=_0x3478,_0x257b26=_0x1241e9();while(!![]){try{const _0x2a0b8f=parseInt(_0x35ecf0(0x189))/0x1+-parseInt(_0x35ecf0(0x1a8))/0x2*(parseInt(_0x35ecf0(0x173))/0x3)+parseInt(_0x35ecf0(0x1ab))/0x4*(-parseInt(_0x35ecf0(0x1a5))/0x5)+-parseInt(_0x35ecf0(0x178))/0x6+parseInt(_0x35ecf0(0x1ae))/0x7+parseInt(_0x35ecf0(0x18b))/0x8*(parseInt(_0x35ecf0(0x188))/0x9)+parseInt(_0x35ecf0(0x19b))/0xa;if(_0x2a0b8f===_0xec8ae7)break;else _0x257b26['push'](_0x257b26['shift']());}catch(_0x3bdc3e){_0x257b26['push'](_0x257b26['shift']());}}}(_0xbaa3,0x39362));function _0xbaa3(){const _0x3639b9=['1225947ZPjAvs','Время\x20выполнения\x20cancelOrder\x20(с\x20ошибкой):\x20','Wallet','uuid','stop','1903404wTqhJJ','error','account','Messenger','drop','forts_futures_weekend','lot','forEach','api','success','exchange','catch','ticker','now','__esModule','buy','61137hwswom','49206ucXNeA','orderId','200ajLclo','minPriceIncrementAmount','payload','Кошелек\x20выключен','helpers','perf_hooks','cancelOrder','Выключение','log','\x20по\x20price_rub\x20','minPriceIncrement','activeOrders','portfolio','postOrder','Кошелек\x20запущен','./messenger','10481070TiBUCm','Время\x20инициализации\x20аккаунта:\x20','\x20по\x20','toQuotation','Время\x20выполнения\x20postOrder:\x20','options','floor','then','byLogMessage','OrderDirection','25RfqxeY','cancelLimitOrderLogMessage','foreignMaxMoneySize','2JNPAML','Helpers','RealAccount','266452PoQRBH','figi','accountId','183036xHjfSP','ORDER_DIRECTION_BUY','tinkoff-invest-api','add','performance','\x20мс','Время\x20выполнения\x20cancelOrder:\x20','tinkoff-invest-api/cjs/generated/orders','message','maxMOEXMoneySize','delete','toFixed'];_0xbaa3=function(){return _0x3639b9;};return _0xbaa3();}function _0x3478(_0x2d2497,_0x134892){const _0xbaa3a4=_0xbaa3();return _0x3478=function(_0x3478fe,_0x306259){_0x3478fe=_0x3478fe-0x169;let _0x2571c1=_0xbaa3a4[_0x3478fe];return _0x2571c1;},_0x3478(_0x2d2497,_0x134892);}Object['defineProperty'](exports,_0x2d9567(0x186),{'value':!![]}),exports[_0x2d9567(0x175)]=void 0x0;const tinkoff_invest_api_1=require(_0x2d9567(0x169)),orders_1=require(_0x2d9567(0x16e)),uuid_1=require(_0x2d9567(0x176)),messenger_1=require(_0x2d9567(0x19a)),perf_hooks_1=require(_0x2d9567(0x190)),tinkoff_invest_api_2=require(_0x2d9567(0x169));class Wallet{constructor(_0x2fb23f,_0x2423ca,_0x2c87e1){const _0x284558=_0x2d9567;this[_0x284558(0x180)]=_0x2fb23f,this[_0x284558(0x1ad)]=_0x2423ca,this['options']=_0x2c87e1,this[_0x284558(0x16f)]=new messenger_1[(_0x284558(0x17b))](),this[_0x284558(0x196)]=new Set();}async['init'](){const _0x161744=_0x2d9567,_0x4b5274=perf_hooks_1[_0x161744(0x16b)]['now']();this[_0x161744(0x17a)]=new tinkoff_invest_api_1[(_0x161744(0x1aa))](this[_0x161744(0x180)],this['accountId']),console['log'](_0x161744(0x199));const _0x465336=perf_hooks_1['performance'][_0x161744(0x185)]();console[_0x161744(0x193)](_0x161744(0x19c)+(_0x465336-_0x4b5274)['toFixed'](0x2)+_0x161744(0x16c));}[_0x2d9567(0x177)](){const _0x2455fc=_0x2d9567;this[_0x2455fc(0x197)]=undefined,this[_0x2455fc(0x17a)]=undefined,this[_0x2455fc(0x196)][_0x2455fc(0x17f)](_0x4a3955=>this[_0x2455fc(0x191)](_0x4a3955,_0x2455fc(0x192),'Все',0x0)),console[_0x2455fc(0x193)](_0x2455fc(0x18e));}[_0x2d9567(0x187)](_0x55fc83,_0x50c844,_0x2729ad,_0x304192,_0x1fb9ad){const _0x3238ae=_0x2d9567;if(!this['account'])return;const _0x208915=_0x50c844/tinkoff_invest_api_2[_0x3238ae(0x1a9)]['toNumber'](_0x55fc83[_0x2729ad[_0x3238ae(0x1ac)]][_0x3238ae(0x195)])*tinkoff_invest_api_2[_0x3238ae(0x1a9)]['toNumber'](_0x55fc83[_0x2729ad[_0x3238ae(0x1ac)]][_0x3238ae(0x18c)]),_0x9f8515=_0x1fb9ad?_0x1fb9ad:_0x2729ad[_0x3238ae(0x182)]['includes'](_0x3238ae(0x17d))?this[_0x3238ae(0x1a0)]['drop'][_0x3238ae(0x170)]:this[_0x3238ae(0x1a0)][_0x3238ae(0x17c)][_0x3238ae(0x1a7)],_0x4ad2f5=Math[_0x3238ae(0x1a1)](Math[_0x3238ae(0x1a1)](_0x9f8515/(_0x208915*_0x2729ad[_0x3238ae(0x17e)]))),_0x247a27=!_0x4ad2f5?0x0:_0x4ad2f5,_0xbfd090=perf_hooks_1['performance'][_0x3238ae(0x185)]();this[_0x3238ae(0x17a)][_0x3238ae(0x198)]({'figi':_0x2729ad[_0x3238ae(0x1ac)],'quantity':_0x247a27,'price':this[_0x3238ae(0x180)][_0x3238ae(0x18f)][_0x3238ae(0x19e)](_0x50c844),'direction':orders_1[_0x3238ae(0x1a4)][_0x3238ae(0x1af)],'orderType':orders_1['OrderType']['ORDER_TYPE_LIMIT'],'orderId':(0x0,uuid_1['v4'])()})[_0x3238ae(0x1a2)](_0xf9b31d=>{const _0x41d1a6=_0x3238ae,_0x3bc0d8=perf_hooks_1[_0x41d1a6(0x16b)][_0x41d1a6(0x185)]();console[_0x41d1a6(0x193)](_0x41d1a6(0x19f)+(_0x3bc0d8-_0xbfd090)['toFixed'](0x2)+'\x20мс'),this[_0x41d1a6(0x16f)]['openLimitOrderLogMessage'](_0x304192,_0x23ca19,'success',_0x2729ad[_0x41d1a6(0x184)]),_0xf9b31d&&_0xf9b31d['orderId']&&this[_0x41d1a6(0x196)][_0x41d1a6(0x16a)](_0xf9b31d['orderId']),this['cancelOrder'](_0xf9b31d&&_0xf9b31d[_0x41d1a6(0x18a)],_0x304192,_0x2729ad[_0x41d1a6(0x184)],0x3d*0x3e8);})[_0x3238ae(0x183)](_0x1f2914=>{const _0x5ccb6d=_0x3238ae;var _0x33b214;const _0x3b1668=perf_hooks_1[_0x5ccb6d(0x16b)]['now']();console[_0x5ccb6d(0x193)]('Время\x20выполнения\x20postOrder\x20(с\x20ошибкой):\x20'+(_0x3b1668-_0xbfd090)[_0x5ccb6d(0x172)](0x2)+_0x5ccb6d(0x16c)),this[_0x5ccb6d(0x16f)]['openLimitOrderLogMessage'](_0x304192,_0x23ca19,_0x5ccb6d(0x179),_0x2729ad[_0x5ccb6d(0x184)],(_0x33b214=_0x1f2914===null||_0x1f2914===void 0x0?void 0x0:_0x1f2914[_0x5ccb6d(0x18d)])===null||_0x33b214===void 0x0?void 0x0:_0x33b214[_0x5ccb6d(0x16f)]);});const _0x23ca19=_0x2729ad['ticker']+':\x20'+_0x247a27+_0x3238ae(0x19d)+_0x50c844;this[_0x3238ae(0x16f)][_0x3238ae(0x1a3)](_0x304192,_0x23ca19);const _0x4ea118=_0x2729ad[_0x3238ae(0x184)]+':\x20'+_0x247a27+_0x3238ae(0x194)+_0x208915;this[_0x3238ae(0x16f)][_0x3238ae(0x1a3)](_0x304192,_0x4ea118);}[_0x2d9567(0x191)](_0xeaf0dd,_0x1cad42,_0x1bf544,_0x4fc415){if(_0xeaf0dd)setTimeout(()=>{const _0x662665=_0x3478;if(this['account']){const _0xcbc06d=perf_hooks_1[_0x662665(0x16b)][_0x662665(0x185)]();this['account'][_0x662665(0x191)](_0xeaf0dd)[_0x662665(0x1a2)](_0x2239be=>{const _0x58375e=_0x662665,_0x3ed173=perf_hooks_1['performance'][_0x58375e(0x185)]();console[_0x58375e(0x193)](_0x58375e(0x16d)+(_0x3ed173-_0xcbc06d)['toFixed'](0x2)+_0x58375e(0x16c)),this[_0x58375e(0x16f)][_0x58375e(0x1a6)](_0x1cad42,_0x58375e(0x181),_0x1bf544),this['activeOrders'][_0x58375e(0x171)](_0xeaf0dd);})[_0x662665(0x183)](_0x17cdbe=>{const _0x4ee462=_0x662665;var _0x218c71;const _0x28327a=perf_hooks_1[_0x4ee462(0x16b)][_0x4ee462(0x185)]();console[_0x4ee462(0x193)](_0x4ee462(0x174)+(_0x28327a-_0xcbc06d)[_0x4ee462(0x172)](0x2)+_0x4ee462(0x16c)),this['message'][_0x4ee462(0x1a6)](_0x1cad42,_0x4ee462(0x179),_0x1bf544,(_0x218c71=_0x17cdbe===null||_0x17cdbe===void 0x0?void 0x0:_0x17cdbe[_0x4ee462(0x18d)])===null||_0x218c71===void 0x0?void 0x0:_0x218c71[_0x4ee462(0x16f)]);});}},_0x4fc415);}}exports[_0x2d9567(0x175)]=Wallet;