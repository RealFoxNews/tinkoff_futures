'use strict';const _0x135eef=_0x4c33;(function(_0x5af342,_0x5f46ea){const _0x4e9f0b=_0x4c33,_0x37b2df=_0x5af342();while(!![]){try{const _0x4ce8e5=parseInt(_0x4e9f0b(0x153))/0x1+-parseInt(_0x4e9f0b(0x178))/0x2+-parseInt(_0x4e9f0b(0x15b))/0x3*(-parseInt(_0x4e9f0b(0x142))/0x4)+parseInt(_0x4e9f0b(0x17c))/0x5*(-parseInt(_0x4e9f0b(0x17d))/0x6)+parseInt(_0x4e9f0b(0x15e))/0x7+parseInt(_0x4e9f0b(0x149))/0x8+-parseInt(_0x4e9f0b(0x157))/0x9;if(_0x4ce8e5===_0x5f46ea)break;else _0x37b2df['push'](_0x37b2df['shift']());}catch(_0x2b5336){_0x37b2df['push'](_0x37b2df['shift']());}}}(_0x4fa5,0xca1eb));function _0x4fa5(){const _0x463b87=['orderId','Кошелек\x20выключен','minPriceIncrement','api','foreignMaxMoneySize','750848iaDTKu','floor','then','portfolio','1031904hTchOq','options','lot','log','3hYkrqo','performance','maxMOEXMoneySize','6327335UAcJSM','\x20по\x20','ticker','Время\x20выполнения\x20postOrder:\x20','Время\x20инициализации\x20аккаунта:\x20','Helpers','toFixed','toQuotation','ORDER_DIRECTION_BUY','helpers','Время\x20выполнения\x20cancelOrder:\x20','error','Время\x20выполнения\x20cancelOrder\x20(с\x20ошибкой):\x20','accountId','Время\x20выполнения\x20postOrder\x20(с\x20ошибкой):\x20','add','OrderType','Messenger','byLogMessage','Wallet','catch','stop','minPriceIncrementAmount','cancelOrder','./messenger','now','3156040JNELdL','message','buy','__esModule','8850olHxhD','4548RsPpgE','payload','uuid','includes','openLimitOrderLogMessage','postOrder','success','figi','forEach','2333612yUZQEc','Выключение','cancelLimitOrderLogMessage','tinkoff-invest-api','FORTS_EVENING','activeOrders','RealAccount','12992504SaTJmX','\x20мс','account','exchange','Все'];_0x4fa5=function(){return _0x463b87;};return _0x4fa5();}Object['defineProperty'](exports,_0x135eef(0x17b),{'value':!![]}),exports['Wallet']=void 0x0;function _0x4c33(_0x4eadaa,_0x12e747){const _0x4fa55e=_0x4fa5();return _0x4c33=function(_0x4c3382,_0x17aa9a){_0x4c3382=_0x4c3382-0x13b;let _0x2fc267=_0x4fa55e[_0x4c3382];return _0x2fc267;},_0x4c33(_0x4eadaa,_0x12e747);}const tinkoff_invest_api_1=require(_0x135eef(0x145)),orders_1=require('tinkoff-invest-api/cjs/generated/orders'),uuid_1=require(_0x135eef(0x13b)),messenger_1=require(_0x135eef(0x176)),perf_hooks_1=require('perf_hooks'),tinkoff_invest_api_2=require('tinkoff-invest-api');class Wallet{constructor(_0x567cba,_0x2231d9,_0x49035e){const _0x3125be=_0x135eef;this[_0x3125be(0x151)]=_0x567cba,this['accountId']=_0x2231d9,this['options']=_0x49035e,this[_0x3125be(0x179)]=new messenger_1[(_0x3125be(0x16f))](),this[_0x3125be(0x147)]=new Set();}async['init'](){const _0x203428=_0x135eef,_0x3c9e69=perf_hooks_1['performance'][_0x203428(0x177)]();this[_0x203428(0x14b)]=new tinkoff_invest_api_1[(_0x203428(0x148))](this['api'],this[_0x203428(0x16b)]),console['log']('Кошелек\x20запущен');const _0x1df197=perf_hooks_1['performance'][_0x203428(0x177)]();console[_0x203428(0x15a)](_0x203428(0x162)+(_0x1df197-_0x3c9e69)[_0x203428(0x164)](0x2)+'\x20мс');}[_0x135eef(0x173)](){const _0x588d69=_0x135eef;this[_0x588d69(0x156)]=undefined,this[_0x588d69(0x14b)]=undefined,this['activeOrders'][_0x588d69(0x141)](_0x27805d=>this[_0x588d69(0x175)](_0x27805d,_0x588d69(0x143),_0x588d69(0x14d),0x0)),console[_0x588d69(0x15a)](_0x588d69(0x14f));}[_0x135eef(0x17a)](_0x5b96df,_0x1861f3,_0x102fbe,_0x3fa7b1,_0x1f9464){const _0x2097a5=_0x135eef;if(!this[_0x2097a5(0x14b)])return;_0x1861f3=_0x1861f3/tinkoff_invest_api_2[_0x2097a5(0x163)]['toNumber'](_0x5b96df[_0x102fbe[_0x2097a5(0x140)]][_0x2097a5(0x150)])*tinkoff_invest_api_2['Helpers']['toNumber'](_0x5b96df[_0x102fbe[_0x2097a5(0x140)]][_0x2097a5(0x174)]);const _0x5c8a11=_0x1f9464?_0x1f9464:_0x102fbe[_0x2097a5(0x14c)][_0x2097a5(0x13c)](_0x2097a5(0x146))?this['options']['drop'][_0x2097a5(0x15d)]:this[_0x2097a5(0x158)]['drop'][_0x2097a5(0x152)],_0x55099a=Math[_0x2097a5(0x154)](Math['floor'](_0x5c8a11/(_0x1861f3*_0x102fbe[_0x2097a5(0x159)]))),_0x39c17f=!_0x55099a?0x0:_0x55099a,_0x3da7fe=_0x102fbe[_0x2097a5(0x160)]+':\x20'+_0x39c17f+_0x2097a5(0x15f)+_0x1861f3;this[_0x2097a5(0x179)][_0x2097a5(0x170)](_0x3fa7b1,_0x3da7fe);const _0x5c339c=perf_hooks_1[_0x2097a5(0x15c)][_0x2097a5(0x177)]();this[_0x2097a5(0x14b)][_0x2097a5(0x13e)]({'figi':_0x102fbe[_0x2097a5(0x140)],'quantity':_0x39c17f,'price':this[_0x2097a5(0x151)][_0x2097a5(0x167)][_0x2097a5(0x165)](_0x1861f3),'direction':orders_1['OrderDirection'][_0x2097a5(0x166)],'orderType':orders_1[_0x2097a5(0x16e)]['ORDER_TYPE_LIMIT'],'orderId':(0x0,uuid_1['v4'])()})['then'](_0x4572d4=>{const _0x48830d=_0x2097a5,_0x5da5ba=perf_hooks_1[_0x48830d(0x15c)]['now']();console[_0x48830d(0x15a)](_0x48830d(0x161)+(_0x5da5ba-_0x5c339c)[_0x48830d(0x164)](0x2)+_0x48830d(0x14a)),this[_0x48830d(0x179)][_0x48830d(0x13d)](_0x3fa7b1,_0x3da7fe,_0x48830d(0x13f),_0x102fbe[_0x48830d(0x160)]),_0x4572d4&&_0x4572d4[_0x48830d(0x14e)]&&this[_0x48830d(0x147)][_0x48830d(0x16d)](_0x4572d4['orderId']),this['cancelOrder'](_0x4572d4&&_0x4572d4[_0x48830d(0x14e)],_0x3fa7b1,_0x102fbe['ticker'],0x3d*0x3e8);})[_0x2097a5(0x172)](_0x51051b=>{const _0x2d4a98=_0x2097a5;var _0x5a47e9;const _0x1909ec=perf_hooks_1['performance'][_0x2d4a98(0x177)]();console[_0x2d4a98(0x15a)](_0x2d4a98(0x16c)+(_0x1909ec-_0x5c339c)[_0x2d4a98(0x164)](0x2)+_0x2d4a98(0x14a)),this[_0x2d4a98(0x179)][_0x2d4a98(0x13d)](_0x3fa7b1,_0x3da7fe,_0x2d4a98(0x169),_0x102fbe['ticker'],(_0x5a47e9=_0x51051b===null||_0x51051b===void 0x0?void 0x0:_0x51051b[_0x2d4a98(0x17e)])===null||_0x5a47e9===void 0x0?void 0x0:_0x5a47e9[_0x2d4a98(0x179)]);});}[_0x135eef(0x175)](_0x5dd4e5,_0xae2f27,_0x38b027,_0x5cba94){if(_0x5dd4e5)setTimeout(()=>{const _0x37e08d=_0x4c33;if(this['account']){const _0x191a0f=perf_hooks_1[_0x37e08d(0x15c)][_0x37e08d(0x177)]();this['account'][_0x37e08d(0x175)](_0x5dd4e5)[_0x37e08d(0x155)](_0x511776=>{const _0x43d03f=_0x37e08d,_0x415693=perf_hooks_1[_0x43d03f(0x15c)][_0x43d03f(0x177)]();console[_0x43d03f(0x15a)](_0x43d03f(0x168)+(_0x415693-_0x191a0f)['toFixed'](0x2)+_0x43d03f(0x14a)),this['message'][_0x43d03f(0x144)](_0xae2f27,'success',_0x38b027),this[_0x43d03f(0x147)]['delete'](_0x5dd4e5);})[_0x37e08d(0x172)](_0xdce690=>{const _0x1be869=_0x37e08d;var _0x1f2adf;const _0x197b1e=perf_hooks_1['performance'][_0x1be869(0x177)]();console[_0x1be869(0x15a)](_0x1be869(0x16a)+(_0x197b1e-_0x191a0f)[_0x1be869(0x164)](0x2)+_0x1be869(0x14a)),this[_0x1be869(0x179)][_0x1be869(0x144)](_0xae2f27,'error',_0x38b027,(_0x1f2adf=_0xdce690===null||_0xdce690===void 0x0?void 0x0:_0xdce690[_0x1be869(0x17e)])===null||_0x1f2adf===void 0x0?void 0x0:_0x1f2adf[_0x1be869(0x179)]);});}},_0x5cba94);}}exports[_0x135eef(0x171)]=Wallet;