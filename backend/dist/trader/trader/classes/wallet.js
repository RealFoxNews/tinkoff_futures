'use strict';const _0x52a3ee=_0x1406;function _0x1406(_0x7749d,_0x3a043c){const _0x19816b=_0x1981();return _0x1406=function(_0x140620,_0x18cd1c){_0x140620=_0x140620-0x162;let _0x25ef16=_0x19816b[_0x140620];return _0x25ef16;},_0x1406(_0x7749d,_0x3a043c);}(function(_0x234626,_0x4d14f2){const _0x4e4f97=_0x1406,_0x47551e=_0x234626();while(!![]){try{const _0x8a84f=parseInt(_0x4e4f97(0x198))/0x1*(-parseInt(_0x4e4f97(0x186))/0x2)+parseInt(_0x4e4f97(0x18b))/0x3*(parseInt(_0x4e4f97(0x17e))/0x4)+parseInt(_0x4e4f97(0x192))/0x5+-parseInt(_0x4e4f97(0x19a))/0x6*(-parseInt(_0x4e4f97(0x183))/0x7)+parseInt(_0x4e4f97(0x19d))/0x8+-parseInt(_0x4e4f97(0x197))/0x9+-parseInt(_0x4e4f97(0x16e))/0xa*(parseInt(_0x4e4f97(0x18d))/0xb);if(_0x8a84f===_0x4d14f2)break;else _0x47551e['push'](_0x47551e['shift']());}catch(_0x18602a){_0x47551e['push'](_0x47551e['shift']());}}}(_0x1981,0xe643e));Object[_0x52a3ee(0x16c)](exports,_0x52a3ee(0x16a),{'value':!![]}),exports[_0x52a3ee(0x174)]=void 0x0;const tinkoff_invest_api_1=require('tinkoff-invest-api'),orders_1=require(_0x52a3ee(0x162)),uuid_1=require(_0x52a3ee(0x176)),messenger_1=require(_0x52a3ee(0x171)),perf_hooks_1=require(_0x52a3ee(0x18f)),tinkoff_invest_api_2=require(_0x52a3ee(0x1a2));class Wallet{constructor(_0x1cac31,_0x1cc949,_0x134a5c){const _0x4e9d15=_0x52a3ee;this[_0x4e9d15(0x195)]=_0x1cac31,this[_0x4e9d15(0x190)]=_0x1cc949,this[_0x4e9d15(0x177)]=_0x134a5c,this[_0x4e9d15(0x16f)]=new messenger_1[(_0x4e9d15(0x1a6))](),this[_0x4e9d15(0x17d)]=new Set();}async[_0x52a3ee(0x188)](){const _0x21ca7b=_0x52a3ee,_0x16ceba=perf_hooks_1[_0x21ca7b(0x196)][_0x21ca7b(0x179)]();this['account']=new tinkoff_invest_api_1['RealAccount'](this[_0x21ca7b(0x195)],this[_0x21ca7b(0x190)]),console[_0x21ca7b(0x1a8)](_0x21ca7b(0x173));const _0x1b67a1=perf_hooks_1['performance'][_0x21ca7b(0x179)]();console[_0x21ca7b(0x1a8)](_0x21ca7b(0x18a)+(_0x1b67a1-_0x16ceba)[_0x21ca7b(0x165)](0x2)+'\x20мс');}[_0x52a3ee(0x1a1)](){const _0x2d0a2d=_0x52a3ee;this['portfolio']=undefined,this[_0x2d0a2d(0x18c)]=undefined,this[_0x2d0a2d(0x17d)][_0x2d0a2d(0x185)](_0x3e3ae6=>this[_0x2d0a2d(0x1a9)](_0x3e3ae6,'Выключение',_0x2d0a2d(0x182),0x0)),console[_0x2d0a2d(0x1a8)](_0x2d0a2d(0x189));}[_0x52a3ee(0x1aa)](_0x4196bd,_0x14c778,_0x31b4c3,_0x179c26,_0x4d5e61){const _0x108089=_0x52a3ee;if(!this['account'])return;const _0xf32e=_0x14c778/tinkoff_invest_api_2['Helpers'][_0x108089(0x178)](_0x4196bd[_0x31b4c3[_0x108089(0x170)]][_0x108089(0x17a)])*tinkoff_invest_api_2[_0x108089(0x199)]['toNumber'](_0x4196bd[_0x31b4c3[_0x108089(0x170)]][_0x108089(0x169)]),_0x4a8c74=_0x4d5e61?_0x4d5e61:_0x31b4c3[_0x108089(0x191)]['includes'](_0x108089(0x19c))?this[_0x108089(0x177)][_0x108089(0x18e)][_0x108089(0x16b)]:this['options'][_0x108089(0x18e)]['foreignMaxMoneySize'],_0x2f3a46=Math[_0x108089(0x168)](Math['floor'](_0x4a8c74/(_0xf32e*_0x31b4c3['lot']))),_0x30c74f=!_0x2f3a46?0x0:_0x2f3a46,_0x49de56=perf_hooks_1[_0x108089(0x196)][_0x108089(0x179)]();this[_0x108089(0x18c)][_0x108089(0x194)]({'figi':_0x31b4c3[_0x108089(0x170)],'quantity':_0x30c74f,'price':this[_0x108089(0x195)][_0x108089(0x1a0)][_0x108089(0x1a5)](_0x14c778),'direction':orders_1[_0x108089(0x187)]['ORDER_DIRECTION_BUY'],'orderType':orders_1[_0x108089(0x167)][_0x108089(0x166)],'orderId':(0x0,uuid_1['v4'])()})[_0x108089(0x1a7)](_0x215a3c=>{const _0x23b56a=_0x108089,_0x13b05f=perf_hooks_1[_0x23b56a(0x196)][_0x23b56a(0x179)]();console[_0x23b56a(0x1a8)](_0x23b56a(0x1a3)+(_0x13b05f-_0x49de56)[_0x23b56a(0x165)](0x2)+_0x23b56a(0x172)),this[_0x23b56a(0x16f)][_0x23b56a(0x17b)](_0x179c26,_0x42d9a7,_0x23b56a(0x19e),_0x31b4c3['ticker']),_0x215a3c&&_0x215a3c[_0x23b56a(0x163)]&&this[_0x23b56a(0x17d)][_0x23b56a(0x17c)](_0x215a3c[_0x23b56a(0x163)]),this['cancelOrder'](_0x215a3c&&_0x215a3c[_0x23b56a(0x163)],_0x179c26,_0x31b4c3[_0x23b56a(0x16d)],0x3d*0x3e8);})['catch'](_0x27a8d6=>{const _0x33d554=_0x108089;var _0x449e70;const _0x176b4c=perf_hooks_1[_0x33d554(0x196)][_0x33d554(0x179)]();console[_0x33d554(0x1a8)](_0x33d554(0x19f)+(_0x176b4c-_0x49de56)[_0x33d554(0x165)](0x2)+'\x20мс'),this['message'][_0x33d554(0x17b)](_0x179c26,_0x42d9a7,_0x33d554(0x164),_0x31b4c3[_0x33d554(0x16d)],(_0x449e70=_0x27a8d6===null||_0x27a8d6===void 0x0?void 0x0:_0x27a8d6[_0x33d554(0x184)])===null||_0x449e70===void 0x0?void 0x0:_0x449e70['message']);});const _0x42d9a7=_0x31b4c3['ticker']+':\x20'+_0x30c74f+_0x108089(0x180)+_0x14c778;this[_0x108089(0x16f)]['byLogMessage'](_0x179c26,_0x42d9a7);const _0x4c2dc6=_0x31b4c3[_0x108089(0x16d)]+':\x20'+_0x30c74f+_0x108089(0x1a4)+_0xf32e;this[_0x108089(0x16f)][_0x108089(0x175)](_0x179c26,_0x4c2dc6);}[_0x52a3ee(0x1a9)](_0x54af51,_0xb7a918,_0x19a8a2,_0x21ac89){if(_0x54af51)setTimeout(()=>{const _0x15e6d4=_0x1406;if(this[_0x15e6d4(0x18c)]){const _0x4b1dd7=perf_hooks_1[_0x15e6d4(0x196)][_0x15e6d4(0x179)]();this[_0x15e6d4(0x18c)][_0x15e6d4(0x1a9)](_0x54af51)[_0x15e6d4(0x1a7)](_0x15b44f=>{const _0x483279=_0x15e6d4,_0x35a0dc=perf_hooks_1[_0x483279(0x196)][_0x483279(0x179)]();console['log'](_0x483279(0x19b)+(_0x35a0dc-_0x4b1dd7)[_0x483279(0x165)](0x2)+_0x483279(0x172)),this[_0x483279(0x16f)][_0x483279(0x193)](_0xb7a918,'success',_0x19a8a2),this['activeOrders']['delete'](_0x54af51);})[_0x15e6d4(0x181)](_0x4a0018=>{const _0x14c3c3=_0x15e6d4;var _0x3bcfd3;const _0x10adbd=perf_hooks_1[_0x14c3c3(0x196)][_0x14c3c3(0x179)]();console['log'](_0x14c3c3(0x17f)+(_0x10adbd-_0x4b1dd7)[_0x14c3c3(0x165)](0x2)+'\x20мс'),this['message'][_0x14c3c3(0x193)](_0xb7a918,_0x14c3c3(0x164),_0x19a8a2,(_0x3bcfd3=_0x4a0018===null||_0x4a0018===void 0x0?void 0x0:_0x4a0018[_0x14c3c3(0x184)])===null||_0x3bcfd3===void 0x0?void 0x0:_0x3bcfd3[_0x14c3c3(0x16f)]);});}},_0x21ac89);}}function _0x1981(){const _0x3f0442=['minPriceIncrement','openLimitOrderLogMessage','add','activeOrders','12652XZKJzB','Время\x20выполнения\x20cancelOrder\x20(с\x20ошибкой):\x20','\x20по\x20','catch','Все','4123wcaPNV','payload','forEach','34610ntEnsW','OrderDirection','init','Кошелек\x20выключен','Время\x20инициализации\x20аккаунта:\x20','1377PXMhKK','account','8644141SQLyIM','drop','perf_hooks','accountId','exchange','8150465lbBDRJ','cancelLimitOrderLogMessage','postOrder','api','performance','10315809uOUrzz','55IXoCBR','Helpers','13362YAturg','Время\x20выполнения\x20cancelOrder:\x20','FORTS_EVENING','8040176cuEwwN','success','Время\x20выполнения\x20postOrder\x20(с\x20ошибкой):\x20','helpers','stop','tinkoff-invest-api','Время\x20выполнения\x20postOrder:\x20','\x20по\x20price_rub\x20','toQuotation','Messenger','then','log','cancelOrder','buy','tinkoff-invest-api/cjs/generated/orders','orderId','error','toFixed','ORDER_TYPE_LIMIT','OrderType','floor','minPriceIncrementAmount','__esModule','maxMOEXMoneySize','defineProperty','ticker','30UstZiK','message','figi','./messenger','\x20мс','Кошелек\x20запущен','Wallet','byLogMessage','uuid','options','toNumber','now'];_0x1981=function(){return _0x3f0442;};return _0x1981();}exports[_0x52a3ee(0x174)]=Wallet;