'use strict';function _0x4ea0(_0x1c5e97,_0x2d600a){const _0x450f3e=_0x450f();return _0x4ea0=function(_0x4ea098,_0xcc22b1){_0x4ea098=_0x4ea098-0x115;let _0x1c03ef=_0x450f3e[_0x4ea098];return _0x1c03ef;},_0x4ea0(_0x1c5e97,_0x2d600a);}function _0x450f(){const _0x3cebb4=['10aYmiOs','instruments','BASE_CONFIG','toString','369208ggpEYC','324SHmABa','defineProperty','status','475720FFyYcW','path','join','170JJznjr','InstrumentStatus','9778YVReHa','Апи\x20запущено','readFileSync','options','__esModule','from','INSTRUMENT_STATUS_BASE','9476676XFbUYg','13540887oUftNC','getShares','50300cEFVUy','getAccounts','onCloseWallet','futures','1382953dFLMsn','next','onOpenApi','../../models/base.config','rxjs','stop','BaseTrader','getShares$','wallet','../../utils/merge.util','log','onCloseApi','merge','204DLtOfL','\x1b[31m','api','7vXcwWR'];_0x450f=function(){return _0x3cebb4;};return _0x450f();}const _0x3db458=_0x4ea0;(function(_0x21c285,_0x475669){const _0x377fa5=_0x4ea0,_0x2a2325=_0x21c285();while(!![]){try{const _0x59be79=-parseInt(_0x377fa5(0x122))/0x1+-parseInt(_0x377fa5(0x12b))/0x2*(parseInt(_0x377fa5(0x123))/0x3)+parseInt(_0x377fa5(0x135))/0x4*(-parseInt(_0x377fa5(0x129))/0x5)+parseInt(_0x377fa5(0x132))/0x6+-parseInt(_0x377fa5(0x11d))/0x7*(parseInt(_0x377fa5(0x126))/0x8)+-parseInt(_0x377fa5(0x133))/0x9*(parseInt(_0x377fa5(0x11e))/0xa)+parseInt(_0x377fa5(0x139))/0xb*(parseInt(_0x377fa5(0x11a))/0xc);if(_0x59be79===_0x475669)break;else _0x2a2325['push'](_0x2a2325['shift']());}catch(_0x234256){_0x2a2325['push'](_0x2a2325['shift']());}}}(_0x450f,0xca237));Object[_0x3db458(0x124)](exports,_0x3db458(0x12f),{'value':!![]}),exports[_0x3db458(0x13f)]=void 0x0;const fs=require('fs'),path=require(_0x3db458(0x127)),rxjs_1=require(_0x3db458(0x13d)),base_config_1=require(_0x3db458(0x13c)),instruments_1=require('tinkoff-invest-api/cjs/generated/instruments'),merge_util_1=require(_0x3db458(0x116));class BaseTrader{constructor(){const _0x3ea7da=_0x3db458;this['status']=new rxjs_1['Subject'](),this[_0x3ea7da(0x125)][_0x3ea7da(0x13a)]({'status':_0x3ea7da(0x11c),'alive':![]}),this[_0x3ea7da(0x125)][_0x3ea7da(0x13a)]({'status':_0x3ea7da(0x115),'alive':![]});}['initializeOptions'](){const _0x3c8c6d=_0x3db458;this[_0x3c8c6d(0x12e)]=(0x0,merge_util_1[_0x3c8c6d(0x119)])(base_config_1[_0x3c8c6d(0x120)],JSON['parse'](fs[_0x3c8c6d(0x12d)](path[_0x3c8c6d(0x128)](__dirname,'..','..','..','..','config.json'))[_0x3c8c6d(0x121)]()));}['reloadOptions'](_0x5cfb0a){const _0x91cfbe=_0x3db458;this['options']=(0x0,merge_util_1['merge'])(this[_0x91cfbe(0x12e)],_0x5cfb0a);}[_0x3db458(0x13b)](){const _0x64ba04=_0x3db458;this[_0x64ba04(0x125)][_0x64ba04(0x13a)]({'status':_0x64ba04(0x11c),'alive':!![]}),console[_0x64ba04(0x117)]('\x1b[36m%s\x1b[0m',_0x64ba04(0x12c),'\x1b[37m');}[_0x3db458(0x118)](){const _0x3953d0=_0x3db458;this['api']=undefined,this[_0x3953d0(0x125)][_0x3953d0(0x13a)]({'status':'api','alive':![]}),console[_0x3953d0(0x117)](_0x3953d0(0x11b),'Апи\x20выключено','\x1b[37m');}['onOpenWallet'](){const _0x3724ad=_0x3db458;this['status']['next']({'status':_0x3724ad(0x115),'alive':!![]});}[_0x3db458(0x137)](){const _0x33064=_0x3db458;var _0x489464;(_0x489464=this[_0x33064(0x115)])===null||_0x489464===void 0x0?void 0x0:_0x489464[_0x33064(0x13e)](),this['wallet']=undefined,this[_0x33064(0x125)][_0x33064(0x13a)]({'status':_0x33064(0x115),'alive':![]});}async['getAccounts'](){const _0x268571=_0x3db458;console[_0x268571(0x117)](this['api']);if(!this[_0x268571(0x11c)])return null;const {accounts:_0x39346b}=await this[_0x268571(0x11c)]['users'][_0x268571(0x136)]({});return console[_0x268571(0x117)](_0x39346b),_0x39346b;}async[_0x3db458(0x134)](){const _0x57825c=_0x3db458;if(!this['api'])return null;const _0x217048=await this['api'][_0x57825c(0x11f)][_0x57825c(0x138)]({'instrumentStatus':instruments_1[_0x57825c(0x12a)][_0x57825c(0x131)]});return _0x217048['instruments'];}[_0x3db458(0x140)](){const _0x1c2785=_0x3db458;return(0x0,rxjs_1[_0x1c2785(0x130)])(this[_0x1c2785(0x134)]());}}exports[_0x3db458(0x13f)]=BaseTrader;