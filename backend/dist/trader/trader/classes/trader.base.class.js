'use strict';const _0x59b75d=_0x4467;function _0x4467(_0x384aa7,_0x3ff839){const _0xba1b72=_0xba1b();return _0x4467=function(_0x4467b2,_0x28f3e0){_0x4467b2=_0x4467b2-0x6f;let _0x8d5b94=_0xba1b72[_0x4467b2];return _0x8d5b94;},_0x4467(_0x384aa7,_0x3ff839);}(function(_0x2a8ecd,_0x50d4f9){const _0x5115a0=_0x4467,_0x571879=_0x2a8ecd();while(!![]){try{const _0x5d4244=parseInt(_0x5115a0(0x83))/0x1+-parseInt(_0x5115a0(0x72))/0x2*(-parseInt(_0x5115a0(0x8d))/0x3)+parseInt(_0x5115a0(0x75))/0x4*(parseInt(_0x5115a0(0x7c))/0x5)+-parseInt(_0x5115a0(0x84))/0x6+-parseInt(_0x5115a0(0x8e))/0x7+parseInt(_0x5115a0(0x98))/0x8+-parseInt(_0x5115a0(0x85))/0x9;if(_0x5d4244===_0x50d4f9)break;else _0x571879['push'](_0x571879['shift']());}catch(_0x46d0e9){_0x571879['push'](_0x571879['shift']());}}}(_0xba1b,0xb8421));Object[_0x59b75d(0x81)](exports,_0x59b75d(0x97),{'value':!![]}),exports['BaseTrader']=void 0x0;const fs=require('fs'),path=require(_0x59b75d(0x73)),rxjs_1=require('rxjs'),base_config_1=require(_0x59b75d(0x86)),instruments_1=require('tinkoff-invest-api/cjs/generated/instruments'),merge_util_1=require(_0x59b75d(0x99));function _0xba1b(){const _0x191dca=['readFileSync','merge','getShares$','Апи\x20запущено','wallet','__esModule','7668416DuawNN','../../utils/merge.util','users','getShares','stop','InstrumentStatus','120kQIyvO','path','log','42876MdbIHD','onCloseApi','onOpenApi','initializeOptions','\x1b[37m','Апи\x20выключено','config.json','175mgwOWA','INSTRUMENT_STATUS_BASE','next','getAccounts','futures','defineProperty','options','181900MHRNaD','4778118WuVMsM','913419KEUupf','../../models/base.config','status','onOpenWallet','reloadOptions','\x1b[31m','instruments','parse','16935xtemIl','1412264xFRBcA','api','BaseTrader','join'];_0xba1b=function(){return _0x191dca;};return _0xba1b();}class BaseTrader{constructor(){const _0x51b8ee=_0x59b75d;this[_0x51b8ee(0x87)]=new rxjs_1['Subject'](),this[_0x51b8ee(0x87)]['next']({'status':_0x51b8ee(0x8f),'alive':![]}),this[_0x51b8ee(0x87)][_0x51b8ee(0x7e)]({'status':_0x51b8ee(0x96),'alive':![]});}[_0x59b75d(0x78)](){const _0x35007e=_0x59b75d;this['options']=(0x0,merge_util_1[_0x35007e(0x93)])(base_config_1['BASE_CONFIG'],JSON[_0x35007e(0x8c)](fs[_0x35007e(0x92)](path[_0x35007e(0x91)](__dirname,'..','..','..','..',_0x35007e(0x7b)))['toString']()));}[_0x59b75d(0x89)](_0xbcd5f4){const _0xe7dd94=_0x59b75d;this[_0xe7dd94(0x82)]=(0x0,merge_util_1[_0xe7dd94(0x93)])(this[_0xe7dd94(0x82)],_0xbcd5f4);}[_0x59b75d(0x77)](){const _0x33ab31=_0x59b75d;this['status'][_0x33ab31(0x7e)]({'status':_0x33ab31(0x8f),'alive':!![]}),console[_0x33ab31(0x74)]('\x1b[36m%s\x1b[0m',_0x33ab31(0x95),_0x33ab31(0x79));}[_0x59b75d(0x76)](){const _0x5c71d5=_0x59b75d;this['api']=undefined,this[_0x5c71d5(0x87)][_0x5c71d5(0x7e)]({'status':_0x5c71d5(0x8f),'alive':![]}),console[_0x5c71d5(0x74)](_0x5c71d5(0x8a),_0x5c71d5(0x7a),_0x5c71d5(0x79));}[_0x59b75d(0x88)](){const _0x233329=_0x59b75d;this[_0x233329(0x87)][_0x233329(0x7e)]({'status':_0x233329(0x96),'alive':!![]});}['onCloseWallet'](){const _0x51d8a6=_0x59b75d;var _0x2e6dbf;(_0x2e6dbf=this[_0x51d8a6(0x96)])===null||_0x2e6dbf===void 0x0?void 0x0:_0x2e6dbf[_0x51d8a6(0x70)](),this[_0x51d8a6(0x96)]=undefined,this[_0x51d8a6(0x87)][_0x51d8a6(0x7e)]({'status':_0x51d8a6(0x96),'alive':![]});}async[_0x59b75d(0x7f)](){const _0x8f8a03=_0x59b75d;console['log'](this['api']);if(!this[_0x8f8a03(0x8f)])return null;const {accounts:_0x5ef510}=await this[_0x8f8a03(0x8f)][_0x8f8a03(0x9a)]['getAccounts']({});return console[_0x8f8a03(0x74)](_0x5ef510),_0x5ef510;}async[_0x59b75d(0x6f)](){const _0x406af2=_0x59b75d;if(!this[_0x406af2(0x8f)])return null;const _0x3f1b51=await this['api']['instruments'][_0x406af2(0x80)]({'instrumentStatus':instruments_1[_0x406af2(0x71)][_0x406af2(0x7d)]});return _0x3f1b51[_0x406af2(0x8b)];}[_0x59b75d(0x94)](){return(0x0,rxjs_1['from'])(this['getShares']());}}exports[_0x59b75d(0x90)]=BaseTrader;