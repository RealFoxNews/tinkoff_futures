'use strict';function _0x3f7a(){const _0x1db1b4=['findAll','12tCuLvk','server','424486QczmJj','__esModule','decorate','object','__metadata','length','map','prototype','7113813KCUWAl','./trader/trader/trader','1294251HYpdoF','connection','defineProperty','wallet','5pmrHzJ','readFileSync','1222098ZrcxDY','8TauDpt','3989688VYHoXv','WebSocketGateway','./ssl/cert.pem','9MlHkJU','design:type','merge','design:returntype','10739730QhgUEI','__decorate','design:paramtypes','trader','SubscribeMessage','pipe','Server','Trader','1058189AFaOLG','afterInit','WebSocketServer','listen','metadata','./ssl/key.pem','function','ApiGateway','1prJKMW','api','createServer','__param'];_0x3f7a=function(){return _0x1db1b4;};return _0x3f7a();}function _0xbde5(_0x3d71b6,_0x8b6881){const _0x3f7a08=_0x3f7a();return _0xbde5=function(_0xbde5bb,_0x176af0){_0xbde5bb=_0xbde5bb-0x171;let _0x3b8217=_0x3f7a08[_0xbde5bb];return _0x3b8217;},_0xbde5(_0x3d71b6,_0x8b6881);}const _0x20935c=_0xbde5;(function(_0x25f305,_0x23d903){const _0x596800=_0xbde5,_0x559c79=_0x25f305();while(!![]){try{const _0x37e57b=parseInt(_0x596800(0x17f))/0x1*(parseInt(_0x596800(0x186))/0x2)+-parseInt(_0x596800(0x190))/0x3*(-parseInt(_0x596800(0x197))/0x4)+parseInt(_0x596800(0x194))/0x5*(parseInt(_0x596800(0x196))/0x6)+parseInt(_0x596800(0x18e))/0x7+parseInt(_0x596800(0x198))/0x8*(-parseInt(_0x596800(0x19b))/0x9)+-parseInt(_0x596800(0x19f))/0xa+-parseInt(_0x596800(0x177))/0xb*(-parseInt(_0x596800(0x184))/0xc);if(_0x37e57b===_0x23d903)break;else _0x559c79['push'](_0x559c79['shift']());}catch(_0x4f9c41){_0x559c79['push'](_0x559c79['shift']());}}}(_0x3f7a,0xc7d66));var __decorate=this&&this[_0x20935c(0x1a0)]||function(_0x3efb6c,_0x1628b8,_0x40f465,_0x5409a6){const _0x478de5=_0x20935c;var _0x516e62=arguments[_0x478de5(0x18b)],_0x1e1052=_0x516e62<0x3?_0x1628b8:_0x5409a6===null?_0x5409a6=Object['getOwnPropertyDescriptor'](_0x1628b8,_0x40f465):_0x5409a6,_0x2326ff;if(typeof Reflect==='object'&&typeof Reflect[_0x478de5(0x188)]===_0x478de5(0x17d))_0x1e1052=Reflect['decorate'](_0x3efb6c,_0x1628b8,_0x40f465,_0x5409a6);else{for(var _0x37614c=_0x3efb6c[_0x478de5(0x18b)]-0x1;_0x37614c>=0x0;_0x37614c--)if(_0x2326ff=_0x3efb6c[_0x37614c])_0x1e1052=(_0x516e62<0x3?_0x2326ff(_0x1e1052):_0x516e62>0x3?_0x2326ff(_0x1628b8,_0x40f465,_0x1e1052):_0x2326ff(_0x1628b8,_0x40f465))||_0x1e1052;}return _0x516e62>0x3&&_0x1e1052&&Object[_0x478de5(0x192)](_0x1628b8,_0x40f465,_0x1e1052),_0x1e1052;},__metadata=this&&this[_0x20935c(0x18a)]||function(_0x4754d1,_0x4dac59){const _0x3d648c=_0x20935c;if(typeof Reflect===_0x3d648c(0x189)&&typeof Reflect[_0x3d648c(0x17b)]==='function')return Reflect['metadata'](_0x4754d1,_0x4dac59);},__param=this&&this[_0x20935c(0x182)]||function(_0x35095f,_0x3a5973){return function(_0x10db98,_0x498c39){_0x3a5973(_0x10db98,_0x498c39,_0x35095f);};};Object[_0x20935c(0x192)](exports,_0x20935c(0x187),{'value':!![]}),exports['ApiGateway']=void 0x0;const websockets_1=require('@nestjs/websockets'),rxjs_1=require('rxjs'),ws_1=require('ws'),trader_1=require(_0x20935c(0x18f)),https_1=require('https'),fs_1=require('fs');let ApiGateway=class ApiGateway{constructor(_0x11ae69){const _0x1988b5=_0x20935c;this[_0x1988b5(0x172)]=_0x11ae69;}[_0x20935c(0x178)](){const _0x11a853=_0x20935c,_0x424963={'key':(0x0,fs_1[_0x11a853(0x195)])(_0x11a853(0x17c)),'cert':(0x0,fs_1[_0x11a853(0x195)])(_0x11a853(0x19a))},_0x41d25e=(0x0,https_1[_0x11a853(0x181)])(_0x424963);_0x41d25e[_0x11a853(0x17a)](0x1f90),this[_0x11a853(0x185)]=new ws_1['Server']({'server':_0x41d25e}),this[_0x11a853(0x185)]['on'](_0x11a853(0x191),_0x1cc32=>{console['log']('Новое\x20wss\x20соединение\x20установлено');});}[_0x20935c(0x183)](_0x409a9a){const _0x7df554=_0x20935c;return(0x0,rxjs_1[_0x7df554(0x19d)])((0x0,rxjs_1['from'])([{'status':'api','alive':!!this[_0x7df554(0x172)][_0x7df554(0x180)]},{'status':_0x7df554(0x193),'alive':!!this['trader'][_0x7df554(0x193)]}]),this[_0x7df554(0x172)]['status'])[_0x7df554(0x174)]((0x0,rxjs_1[_0x7df554(0x18c)])(_0x23e45d=>({'event':'api','data':_0x23e45d})));}};__decorate([(0x0,websockets_1[_0x20935c(0x179)])(),__metadata(_0x20935c(0x19c),ws_1[_0x20935c(0x175)])],ApiGateway['prototype'],_0x20935c(0x185),void 0x0),__decorate([(0x0,websockets_1[_0x20935c(0x173)])(_0x20935c(0x180)),__param(0x0,(0x0,websockets_1['MessageBody'])()),__metadata(_0x20935c(0x19c),Function),__metadata(_0x20935c(0x171),[Object]),__metadata(_0x20935c(0x19e),void 0x0)],ApiGateway[_0x20935c(0x18d)],'findAll',null),ApiGateway=__decorate([(0x0,websockets_1[_0x20935c(0x199)])(),__metadata(_0x20935c(0x171),[trader_1[_0x20935c(0x176)]])],ApiGateway),exports[_0x20935c(0x17e)]=ApiGateway;